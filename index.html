
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>運動量保存則パズル</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 20px;
        }
        #puzzle-container {
            display: none;
            margin-top: 20px;
        }
        .equation-section {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px 0;
        }
        .equation-row {
            display: flex;
            justify-content: center;
            gap: 5px;
        }
        select {
            font-size: 16px;
            padding: 5px;
        }
        #timer {
            font-size: 24px;
            font-weight: bold;
            background-color: #f0f0f0;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 10px;
            width: 100px;
            margin: 10px auto;
        }
        #hint {
            margin: 10px;
            display: none;
        }
        .flash {
            animation: flash-bg 1s ease-in-out;
        }
        @keyframes flash-bg {
            0% { background-color: #fff; }
            50% { background-color: #c8f7c5; }
            100% { background-color: #fff; }
        }
    </style>
</head>
<body>
    <h2>問題：物体1(質量 m₁)、物体2(質量 m₂) の衝突前の速度v₁、v₂、衝突後の速度v₁’、v₂’を用いて、運動量保存則の式を作りなさい。</h2>
    <button onclick="startPuzzle()">スタート</button>

    <div id="puzzle-container">
        <div id="timer">30</div>
        <button onclick="showHint()">ヒント</button>
        <div id="hint">ヒント：衝突前の運動量の合計 = 衝突後の運動量の合計</div>

        <div class="equation-section">
            <div>
                <div>衝突前</div>
                <div class="equation-row" id="left-side">
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁</option><option>v₂</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁</option><option>v₂</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁</option><option>v₂</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁</option><option>v₂</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁</option><option>v₂</option><option>+</option><option>ｰ</option></select>
                </div>
            </div>
        </div>

        <div style="font-size: 32px; transform: rotate(90deg); margin: 10px auto;">＝</div>

        <div class="equation-section">
            <div>
                <div>衝突後</div>
                <div class="equation-row" id="right-side">
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁’</option><option>v₂’</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁’</option><option>v₂’</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁’</option><option>v₂’</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁’</option><option>v₂’</option><option>+</option><option>ｰ</option></select>
                    <select><option value="">選択</option><option>m₁</option><option>m₂</option><option>v₁’</option><option>v₂’</option><option>+</option><option>ｰ</option></select>
                </div>
            </div>
        </div>

        <button onclick="checkAnswer()">答え合わせ</button>
    </div>

    <script>
        let timerInterval;
        let timeLeft = 30;

        function startPuzzle() {
            document.querySelector("button").style.display = "none";
            document.getElementById("puzzle-container").style.display = "block";
            timerInterval = setInterval(() => {
                timeLeft--;
                document.getElementById("timer").textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById("timer").textContent = "時間切れ";
                }
            }, 1000);
        }

        function showHint() {
            document.getElementById("hint").style.display = "block";
        }

        function getSelectedValues(containerId) {
            const selects = document.getElementById(containerId).getElementsByTagName("select");
            return Array.from(selects).map(s => s.value).filter(v => v !== "");
        }

        function checkAnswer() {
            const left = getSelectedValues("left-side");
            const right = getSelectedValues("right-side");

            const validLeft = [
                ["m₁", "v₁", "+", "m₂", "v₂"],
                ["m₂", "v₂", "+", "m₁", "v₁"]
            ];
            const validRight = [
                ["m₁", "v₁’", "+", "m₂", "v₂’"],
                ["m₂", "v₂’", "+", "m₁", "v₁’"]
            ];

            const isLeftCorrect = validLeft.some(arr => JSON.stringify(arr) === JSON.stringify(left));
            const isRightCorrect = validRight.some(arr => JSON.stringify(arr) === JSON.stringify(right));

            if (isLeftCorrect && isRightCorrect) {
                document.body.classList.add("flash");
                clearInterval(timerInterval);
            } else {
                alert("不正解です。もう一度試してください。");
            }
        }
    </script>
</body>
</html>
